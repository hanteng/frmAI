---
title: 🌉🛣🌐 脈絡工程
tags:
  - 智能程式助理
  - 脈絡感知
  - 大語言模型
  - AI工程
  - 提示工程
  - 知識融合
  - AI對齊
  - 多模態AI
  - 對話系統
  - 生成式AI
  - 框架問題
  - 智能體
  - 系統創新
  - 專家混合模型
---
::: {#sec-context-engineering} 
:::

`脈絡工程`（Context Engineering）是一門讓 AI 具備**脈絡感知**（Context-Awareness）能力的技術與方法論，旨在確保 AI 能夠理解使用者的**意圖**、**情境**與**任務背景**，並生成更相關、精確且實用的輸出。簡單來說，它的目標是打造一個能「讀懂空氣」的 AI 系統，使其回應與行動更貼近實際需求與情境。  

`脈絡工程`與 [提示工程](10-03-prompt_engineering.zh-hant) 及 [知識驅動生成（RAG）](10-04-retrieval_augmented_generation.zh-hant) 有所不同。它涵蓋範圍更廣，著重於**系統性地設計、組織與管理** AI 在推理與生成時所使用的**全部脈絡**（任務描述、背景知識、互動歷史、外部訊號等）。資料來源不限於外部知識庫，還包括**使用者輸入**、**感測器**、**API 工具**以及**RAG 檢索結果**等多種來源。透過多模態資料（如時間、地點、裝置狀態、歷史對話等）的整合與管理，`脈絡工程`為 AI 提供完整的情境框架。可以說，它是在提示工程與 RAG 基礎上的**進一步系統創新工程**，並系統性地利用實現[API 與 MCP](@sec-api-mcp)的模組生態資源，確保**有效且安全**地共享**脈絡資訊**。

在應用層面，`脈絡工程`推動了從「單輪指令」到「多輪對話」系統的演進，並促進了從「單模態任務」到「跨模態任務協作」的轉變，支撐更複雜、更體系化的 Agentic AI 與「知識融合」應用。這意味著`脈絡工程`不僅影響輸出品質，也直接關係到 **[框架問題](01-04-Frame_Problem.zh-hant)**、**[對齊與控制問題](01-06-Alignment_Control_Problem.zh-hant.md)** 以及多模態任務的整合效果，並衍生出更多 AI 控制與安全議題，包括潛在的 [語言賽局](01-07-Language_Games.zh-hant) 風險。  

`脈絡工程`的核心思想，是將**任務需求**、**背景知識**、**互動歷史**與**外部檢索結果**組織成**結構化的上下文脈絡系統**，並優化其與基礎模型的輸入輸出互動。主要技術思路包括：脈絡收集與過濾、脈絡結構化與模組化、長度管理與壓縮、動態更新、安全與對齊等，核心任務是決定**提示中放入哪些脈絡**、**如何組織與更新**，以確保 AI 能真正具備脈絡感知，並準確理解使用者的意圖與情境目標。  

***

## 🏷️核心概念{#sec-context-engineering} 

`脈絡工程`的設計範疇涵蓋**脈絡收集**、**脈絡組織**與**脈絡優化**三大面向，並可結合多代理（Agents）與多模態資料。  

- 🗂️ **脈絡來源**：包括使用者輸入、歷史對話、檢索結果（RAG）、外部 API 資料、多模態感知輸入（圖像、音訊、影片）、時間與地點資訊、裝置狀態等。  
- 🏗️ **脈絡結構化**：將脈絡分為任務描述、背景知識、限制條件、範例與輔助資訊等模組，方便模型解析與利用。  
- ⏳ **脈絡長度管理**：在 Token 限制下，透過摘要、壓縮與關鍵資訊提取，保留最有價值的內容。  
- 🔄 **動態脈絡更新**：根據任務進展與模型回應，動態調整脈絡內容與優先順序。 
- 🌐 **跨模態脈絡融合**：將文字、圖像、音訊等不同模態的資訊轉換為模型可理解的統一表示，提升多模態推理能力。  
- 🧩 **脈絡與提示協同**：將`脈絡工程`與提示工程結合，確保提示能正確引導模型利用脈絡資訊。  
- 🔌 **API 與模組協定整合**：透過 API 與 MCP 等標準化協定，讓不同系統模組安全共享脈絡，避免資訊孤島。  
- 🛡️ **脈絡安全與對齊**：過濾敏感或不可靠的脈絡來源，確保生成內容符合安全與倫理規範。  

**小結**：`脈絡工程`是將資訊「組織成智慧」的過程，讓模型在生成時不僅有資料可用，還能在正確的語境下使用它們。  

## 🛅 闡明範例{#exm-ai-coding-assistant}

### 🧑‍💻🫶智能程式助理

`智能程式助理`或`代理式 AI 程式設計助理`（AI Coding Assistants）的目標不僅是生成程式碼，更要理解開發者的複雜需求與專案脈絡（可能橫跨多份文件），並主動協助完成各類程式設計任務。

這類助理的共通功能源自底層 LLM 的能力及其在程式設計領域的應用，至少有兩種脈絡可用來加值：  
一是**專案程式碼風格或需求文件**的脈絡，二是與助理**多輪對話**的脈絡。

1. **🐸⚡ 程式碼生成與自動完成**    
    - **⚙功能**：根據自然語言提示或現有程式碼脈絡，生成程式碼片段、完整函式或類別，並提供智慧化自動完成。        
    - **🫶脈絡增值**：        
        - 📳 **專案**：生成符合專案規範、使用現有函式庫並與模組風格一致的程式碼。            
        - 🗫 **對話**：納入過往對話中開發者的意圖與需求約束。            
2. **🐘💞 程式碼解釋與文件**    
    - **⚙功能**：以清晰自然的語言解釋複雜程式碼、演算法或語法，並自動生成函式與類別文件（docstrings）。        
    - **🫶脈絡增值**：        
        - 📳 **專案**：解釋時聚焦專案相關模式與最佳實踐，並生成符合文件標準的內容。            
        - 🗫 **對話**：依開發者的理解程度與提問歷程調整解釋深度。            
3. **💡⚕ 偵錯與錯誤解決**    
    - **⚙功能**：識別潛在錯誤、提供修復方案並解釋錯誤訊息，能分析堆疊追蹤精確定位問題。        
    - **🫶脈絡增值**：        
        - 📳 **專案**：修復建議會考慮專案架構與常用除錯策略。            
        - 🗫 **對話**：整合開發者描述的情境與已嘗試方法，提供更精準的建議。            
4. **✨🚀 程式碼重構與優化**    
    - **⚙功能**：建議改善結構、風格與效能，支援跨語言轉換與現代化更新。        
    - **🫶脈絡增值**：        
        - 📳 **專案**：重構建議遵循專案風格指南並符合性能目標。            
        - 🗫 **對話**：優先考量開發者在對話中表達的重構目標。            
5. **✍️▶️ 自然語言轉程式碼**    
    - **⚙功能**：將自然語言需求直接轉譯為程式碼，是代理性行為的核心。  
    - **🫶脈絡增值**：        
        - 📳 **專案**：生成程式碼遵循命名慣例與架構模式，並假設開發者熟悉特定 API。            
        - 🗫 **對話**：依逐步細化的需求生成更貼近意圖的程式碼。            
6. **🌐🧠 專案脈絡理解與管理（專案管理）**    
    - **⚙功能**：理解專案全貌，包括檔案結構、現有程式碼、依賴關係與近期互動目標。        
    - **🫶脈絡增值**：        
        - 📳 **專案**：遵循文件規範與架構設計，並引用內部程式碼進行分析或生成。 
        - 🗫 **對話**：追蹤對專案目標、問題與偏好的持續討論，提供更個人化的協助。

這些功能與脈絡增值共同展現了`智能程式助理`如何作為智慧夥伴，深刻改變開發者體驗。其他可延伸的方向還包括**版本控制**與**開發環境**整合。

### 命令列🆚IDE

`智能程式助理`依使用介面可分為**命令列介面**（如 Gemini CLI、Claude）與**整合開發環境**（IDE）（如 Cursor）：

* 🗔 **命令列介面**
    * **⚙功能**：支援快速查詢、程式碼生成、錯誤分析與版本控制指令。
    * **🫶脈絡增值**：整合 Git 狀態、分支策略與 commit 訊息風格，並根據 CLI 操作歷程提供上下文感知的建議與命令補全，包括版本控制指令生成。
* 🖥 **整合開發環境**
    * **⚙功能**：提供即時程式碼建議、錯誤提示、重構工具與文件生成。
    * **🫶脈絡增值**：可視化版本控制、模組依賴圖與測試覆蓋率，並透過互動式提示與側欄對話持續追蹤開發者意圖，提供精準協助。

從程式碼生成到錯誤修復，從自然語言理解到專案管理，智能程式助理的真正價值在於其**脈絡感知能力**。這種能力不僅來自模型的語言理解，更源於`脈絡工程`的系統化設計——將專案脈絡與對話脈絡整合進 AI 的生產力流程中。

橋接「懂你」與「懂程式」，未來的程式設計將不再是孤立的編碼，而是與 AI 智慧夥伴共同完成的協作旅程。


## 👍💖最佳實務  

為了讓`脈絡工程`發揮最大效能，以下是常見的最佳實務：  

- 📋 **明確定義脈絡目標**：釐清脈絡的用途與任務需求，避免加入無關資訊。  
- 🗃️ **模組化脈絡設計**：將脈絡分為可重用的模組，方便在不同任務間快速組裝。  
- 🧪 **測試脈絡配置**：透過 A/B 測試比較不同脈絡組合對輸出的影響。  
- 🔄 **迭代優化**：根據模型表現與使用者反饋，不斷調整脈絡內容與結構。  
- 🛡️ **驗證脈絡來源**：確保外部資料的真實性與可靠性，防止檢索污染。  脈絡品質與更新策略對 [智慧體可靠性與評估](10-02-agent_reliability_evaluation.zh-hant) 有直接影響。
- ⏱️ **平衡脈絡豐富度與效率**：在提供足夠資訊的同時，避免超過模型脈絡長度限制。  
- 🤝 **升級 RAG 與 Agents 結合**：在多步推理與任務規劃中，動態調用檢索與工具，更新脈絡內容。  

**小結**：最佳實務的核心是讓脈絡既「足夠」又「精準」，並能隨任務動態調整。在產品層面，脈絡策略的規劃與落實是 [AI 產品經理](10-06-AI_PM.zh-hant) 的重要職責之一。

## 🪬💞創新思路  

`脈絡工程`還有以下創新思路 ：

* 🚀**前沿架構創新**：`脈絡工程`為前沿的 AI 系統架構提供了創新沃土。例如，利用**專家混合模型**（Mixture of Experts, MoE）可依脈絡將任務分配給不同專家模型，大幅提升複雜情境的處理效率。多智能體系統則可結合**語言賽局**觀點，將`脈絡工程`視為策略性設計核心，構建**多代理人語言賽局**（Multi-agent Language Games）。這些新興系統設計顯示，`脈絡工程`不僅是一項技術，更是引領未來 AI **系統創新**的跨界關鍵領域。  
* 👨‍🚀**AI 協作者與團隊競合轉型**：`脈絡工程`是推動 AI 從單純的「工具」進化為主動的「協作者」的關鍵技術。它賦予 AI 理解情境、預測需求與主動協助的能力，使其不再只是被動的問答機器，而能在複雜任務中發揮協作價值，甚至不只一個角色，而是具備多種不同專業知識形成**競爭及合作**的賽局。

***

## 🤞❣️注意事項  

`脈絡工程`在設計與部署時需注意以下挑戰與風險：  

- 🔒 **隱私與安全**：避免將敏感資訊直接放入脈絡中，必要時進行脫敏處理。  
- 🚫 **脈絡污染**：防範惡意或錯誤資訊進入脈絡，影響生成結果。  
- 📉 **脈絡過載**：過多或冗餘資訊可能干擾模型判斷，降低輸出品質。  
- 🛡️ **防禦提示注入**：在多輪對話中防範惡意輸入修改脈絡內容。  
- 🔍 **結果驗證**：對生成內容進行事後檢查，確保其與脈絡一致且正確。  

透過精煉的情境框架，它幫助 AI 在動態環境中辨識並專注於相關資訊，從而提升推理與決策效率，應對 **[框架問題](01-04-Frame_Problem.zh-hant)**；藉由納入外部系統知識與工具，讓系統連結至世界的行動方案及後果檢驗，有助於緩解 **[符碼紮根問題](01-03-Symbol_Grounding_Problem.zh-hant)**。同時，它也為應對 [對齊與控制問題](01-06-Alignment_Control_Problem.zh-hant.md) 提供了具脈絡實踐及檢驗的路徑。  

***

## 🌉回顧及資源🪸

- ✨ **核心知識**：`脈絡工程`是連接 [提示工程](10-03-prompt_engineering.zh-hant) 與 [檢索增強生成（RAG）](10-04-retrieval_augmented_generation.zh-hant) 的關鍵橋樑，負責將多來源、多模態資訊（任務描述、背景知識、互動歷史、外部檢索結果、感測器資料、API 輸出等）整合成高效可用的上下文，並以結構化方式輸入 LLM。這一過程直接影響系統的推理深度、生成品質、可解釋性與對齊性，也促進更複雜的「多輪對話」、「跨模態任務協作」可能性，引發更多 AI 控制、AI 安全等問題。
- ✅ **實務應用檢核表**：
    - 驗證脈絡來源的真實性與可信度
    - 確保脈絡結構化與模組化程度足夠，便於重用與維護
    - 制定脈絡長度管理策略（摘要、壓縮、關鍵資訊提取）
    - 實施動態更新機制，隨任務進展調整脈絡內容
    - 部署安全防護與對齊策略，防範脈絡污染與提示注入攻擊
- 🏄 **延伸閱讀與工具資源**：可參考最新的 OpenAI、Anthropic 等關於脈絡管理的**最佳實務**文件，RAG 框架（如 LangChain、Haystack）的**脈絡組裝模組**，以及多代理系統的**脈絡協作**案例。

## ✎ 編輯筆記

- [ ] 逐句事實查核 
- [ ] 邏輯流程
- [ ] 本部分內部鏈結
- [ ] 本書各章內部鏈結
- [ ] 外部資源鏈結


