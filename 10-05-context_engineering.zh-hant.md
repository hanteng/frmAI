---
title: "🌉🛣🌐 脈絡工程（Context Engineering）"  
tags:
- 脈絡感知
- 大語言模型
- AI工程
- 提示工程
- 知識融合
- AI對齊
- 多模態AI
- 對話系統
- 生成式AI
- 框架問題
- 智能體
- 系統創新
- 專家混合模型
---
`脈絡工程`（Context Engineering）是一門將**脈絡感知**（Context-Awareness）設計融入 AI 系統的實踐，其核心在於確保 AI 不僅能理解輸入的文字或語音，更能 comprehend 使用者當下的**意圖**、**情境**與**任務背景**。簡單來說，它旨在打造一個能「讀懂空氣」的 AI 系統，使其提供的回應或執行動作更具備相關性與實用性。  

脈絡工程與傳統的[提示工程](10-04-prompt_engineering.zh-hant)有所不同。提示工程通常專注於透過精煉的指令，讓 AI 產出更精準的答案；而脈絡工程則更著重於**系統層級的設計**，透過多模態資料（如時間、地點、裝置、歷史對話等）的整合與管理，為 AI 提供一個完整的情境框架。這類設計常藉由 **API 界面**與**模組協定**（MCP, Module Communication Protocol）來實現，確保不同模組間能有效且安全地共享脈絡資訊。  

在 **大型語言模型**（Large Language Models, LLMs）與 **檢索增強生成**（[RAG](10-06-retrieval_augmented_generation.zh-hant)）快速發展的背景下，脈絡工程標誌著從「單輪指令」走向「多輪對話與知識融合」的新階段。它不僅影響模型的輸出品質，也直接關係到**對齊與控制問題**（AI Alignment & Control Problem 🎯🛡️）、**框架問題**（Frame Problem）以及多模態任務的整合效果。  

脈絡工程的核心思想，是將**任務需求**、**背景知識**、**互動歷史**與**外部檢索結果**組織成結構化的上下文，並以最佳化的方式輸入模型，使其在推理與生成時能充分利用這些資訊，減少幻覺（hallucination）、提升可解釋性與一致性。  

***

## 🏷️ 核心概念  

脈絡工程的設計範疇涵蓋**脈絡收集**、**脈絡組織**與**脈絡優化**三大面向，並可結合多代理（Agents）與多模態資料。  

- 🗂️ **脈絡來源**：包括使用者輸入、歷史對話、檢索結果（RAG）、外部 API 資料、多模態感知輸入（圖像、音訊、影片）、時間與地點資訊、裝置狀態等。  
- 🏗️ **脈絡結構化**：將脈絡分為任務描述、背景知識、限制條件、範例與輔助資訊等模組，方便模型解析與利用。  
- ⏳ **脈絡長度管理**：在 Token 限制下，透過摘要、壓縮與關鍵資訊提取，保留最有價值的內容。  
- 🔄 **動態脈絡更新**：根據任務進展與模型回應，動態調整脈絡內容與優先順序。  
- 🌐 **跨模態脈絡融合**：將文字、圖像、音訊等不同模態的資訊轉換為模型可理解的統一表示，提升多模態推理能力。  
- 🧩 **脈絡與提示協同**：將脈絡工程與提示工程結合，確保提示能正確引導模型利用脈絡資訊。  
- 🔌 **API 與模組協定整合**：透過 API 與 MCP 等標準化協定，讓不同系統模組安全共享脈絡，避免資訊孤島。  
- 🛡️ **脈絡安全與對齊**：過濾敏感或不可靠的脈絡來源，確保生成內容符合安全與倫理規範。  

**小結**：脈絡工程是將資訊「組織成智慧」的過程，讓模型在生成時不僅有資料可用，還能在正確的語境下使用它們。  

### 🛅 闡明範例：領先的代理式 AI 程式設計助理  

代理式 AI 程式設計助理（Agentic AI Coding Assistants）代表了 AI 在軟體開發領域的重大演進。它們超越了簡單的程式碼自動補全或建議，能夠理解高階指令、規劃多步驟任務，並自主執行從程式碼生成到錯誤修復的整個工作流程。這背後的關鍵，正是**脈絡工程**的精準應用。  

#### 1. Agentic CLI

如 Gemini CLI 或 Claude CLI，這類是以終端機上的智慧程式設計助理為主。

- **挑戰**：你正在終端機中，遇到一個 Git 衝突，需要合併多個複雜的程式碼分支。  
- **脈絡工程的應用**：  
    - **檔案系統脈絡**：當你輸入指令時，Agentic CLI 會**自動將當前工作目錄的狀態**、**相關程式碼檔案的內容**和**Git 歷史**作為脈絡傳遞給底層的 LLM。  
    - **命令歷史與執行脈絡**：它會**分析你最近執行的命令**，如 `git status` 或 `git diff`，並將這些命令的輸出結果作為脈絡的一部分。  
    - **工具調用脈絡**：當你發出高階指令「幫我解決這個合併衝突」時，它會**自動調用 Git 工具**，並將工具的執行結果回傳給 LLM 進行分析和判斷。  
- **結果**：Agentic CLI 能夠給出精確的指令來解決衝突，甚至能**自主執行這些指令**，讓你在複雜的終端機任務中，只需專注於高階決策，而無需處理繁瑣的細節。  

#### 2. Cursor

如 Cursor ，這類是以全棧開發者的智慧工作區助理為主。

- **挑戰**：你需要重構一個名為 `utils.js` 的大型工具函式，並將其功能拆分到不同的檔案中。  
- **脈絡工程的應用**：  
    - **全專案脈絡**：Cursor 不僅能看到你當前的檔案，它能**理解整個專案的上下文**，並自動找到所有**引用了這個檔案的程式碼**，將它們的內容納入脈絡。  
    - **多檔案協同**：它能自主地在不同檔案中同步進行修改，例如在 `utils.js` 中刪除舊函式，並在 `auth.js` 和 `data.js` 中建立新函式，同時更新所有相關引用路徑。  
- **結果**：透過脈絡工程，Cursor 能夠執行複雜且涉及多個檔案的重構任務，確保程式碼一致性與正確性，大幅減少手動操作的繁瑣。  

**總結**：這些代理式 AI 不再是被動的工具，而是能夠**主動感知、規劃與執行的協作者**。它們持續將**專案結構、任務需求、程式碼邏輯以及執行結果**等動態脈絡整合到決策過程中，從根本上改變了軟體開發的工作模式。  

***

## 👍💖 最佳實務  

為了讓脈絡工程發揮最大效能，以下是常見的最佳實務：  

- 📋 **明確定義脈絡目標**：釐清脈絡的用途與任務需求，避免加入無關資訊。  
- 🗃️ **模組化脈絡設計**：將脈絡分為可重用的模組，方便在不同任務間快速組裝。  
- 🧪 **測試脈絡配置**：透過 A/B 測試比較不同脈絡組合對輸出的影響。  
- 🔄 **迭代優化**：根據模型表現與使用者反饋，不斷調整脈絡內容與結構。  
- 🛡️ **驗證脈絡來源**：確保外部資料的真實性與可靠性，防止檢索污染。  
- ⏱️ **平衡脈絡豐富度與效率**：在提供足夠資訊的同時，避免超過模型脈絡長度限制。  
- 🤝 **與 RAG 與 Agents 結合**：在多步推理與任務規劃中，動態調用檢索與工具，更新脈絡內容。  

**小結**：最佳實務的核心是讓脈絡既「足夠」又「精準」，並能隨任務動態調整。  

***

## 🤞❣️ 注意事項  

脈絡工程在設計與部署時需注意以下挑戰與風險：  

- 🔒 **隱私與安全**：避免將敏感資訊直接放入脈絡中，必要時進行脫敏處理。  
- 🚫 **脈絡污染**：防範惡意或錯誤資訊進入脈絡，影響生成結果。  
- 📉 **脈絡過載**：過多或冗餘資訊可能干擾模型判斷，降低輸出品質。  
- 🛡️ **防禦提示注入**：在多輪對話中防範惡意輸入修改脈絡內容。  
- 🔍 **結果驗證**：對生成內容進行事後檢查，確保其與脈絡一致且正確。  

***

## 🌉 回顧及資源  

**核心知識**：脈絡工程是提示工程與檢索增強生成之間的橋樑，負責將多來源資訊整合成高效可用的上下文，直接影響 LLM 的推理與生成品質。  

**實務應用檢核表**：檢查脈絡來源的真實性、結構化程度、長度管理策略、動態更新機制與安全防護是否到位。  

**延伸閱讀與工具資源**：可參考 OpenAI、Anthropic 等關於脈絡管理的最佳實務，RAG 框架（如 LangChain、Haystack）的脈絡組裝模組，以及多代理系統的脈絡協作案例。  

***

## ✨ 小結

**脈絡工程**是將 AI 從單純的「工具」升級為「協作者」的關鍵技術。它賦予 AI 理解情境的能力，使其能預測需求並主動協助，不再只是問答機器。這項技術不僅是提升使用者體驗的核心，更是打造下一代 AI 應用（如**智能體**與**人機協作**）的基石。

脈絡工程與多個 AI 核心挑戰緊密相關。它透過提供精煉的情境框架，幫助 AI 解決**框架問題**（Frame Problem）——在動態環境中辨識並專注於相關資訊，從而提升推理與決策效率。此外，藉由納入外部知識，脈絡工程有助於緩解**符號落地問題**（Symbol Grounding Problem），賦予抽象符號真實世界的意義；同時，它也為**AI 倫理與對齊**（AI Alignment）問題提供實踐路徑，讓 AI 行為更符合人類價值觀。

更進一步，脈絡工程為前沿的 AI 架構提供創新沃土。例如，**專家混合模型**（Mixture of Experts, MoE）透過不同的專家模型分配給特定脈絡的任務，大幅提升了處理複雜情境的效率。此外，由多個智能體在共同環境中協作或競爭，更可以應用**語言賽局觀點**，將脈絡工程視為**策略性設計**，築構**多代理人語言賽局**（Multi-agent Language Games）。這些新興的系統設計，都表明了脈絡工程不僅是單一技術，更是引領未來 AI **系統創新**的核心跨界領域。