---
title: "🌉🛣🌐 脈絡工程（Context Engineering）"  
tags:
- 脈絡感知
- 大語言模型
- AI工程
- 提示工程
- 知識融合
- AI對齊
- 多模態AI
- 對話系統
- 生成式AI
- 框架問題
- 智能體
- 系統創新
- 專家混合模型
---
`脈絡工程`（Context Engineering）是一門讓 AI 具備**脈絡感知**（Context-Awareness）能力的技術與方法論，旨在確保 AI 能夠理解使用者的**意圖**、**情境**與**任務背景**，並生成更相關、精確且實用的輸出。簡單來說，它的目標是打造一個能「讀懂空氣」的 AI 系統，使其回應與行動更貼近實際需求與情境。  

脈絡工程與 [提示工程](10-03-prompt_engineering.zh-hant) 及 [知識驅動生成（RAG）](10-04-retrieval_augmented_generation.zh-hant) 有所不同。它涵蓋範圍更廣，著重於**系統性地設計、組織與管理** AI 在推理與生成時所使用的**全部脈絡**（任務描述、背景知識、互動歷史、外部訊號等）。資料來源不限於外部知識庫，還包括**使用者輸入**、**感測器**、**API 工具**以及**RAG 檢索結果**等多種來源。透過多模態資料（如時間、地點、裝置狀態、歷史對話等）的整合與管理，脈絡工程為 AI 提供完整的情境框架。可以說，它是在提示工程與 RAG 基礎上的**進一步系統創新工程**，並系統性地利用實現[API 與 MCP](10-01-API_MCP.zh-hant)的模組生態資源，確保**有效且安全**地共享**脈絡資訊**。

在應用層面，脈絡工程推動了從「單輪指令」到「多輪對話」系統的演進，並促進了從「單模態任務」到「跨模態任務協作」的轉變，支撐更複雜、更體系化的 Agentic AI 與「知識融合」應用。這意味著脈絡工程不僅影響輸出品質，也直接關係到 **[框架問題](01-04-Frame_Problem.zh-hant)**、**[對齊與控制問題](01-06-AI_Alignment_Control_Problem.zh-hant)** 以及多模態任務的整合效果，並衍生出更多 AI 控制與安全議題，包括潛在的 [語言賽局](01-07-Language_Games.zh-hant) 風險。  

脈絡工程的核心思想，是將**任務需求**、**背景知識**、**互動歷史**與**外部檢索結果**組織成**結構化的上下文脈絡系統**，並優化其與基礎模型的輸入輸出互動。主要技術思路包括：脈絡收集與過濾、脈絡結構化與模組化、長度管理與壓縮、動態更新、安全與對齊等，核心任務是決定**提示中放入哪些脈絡**、**如何組織與更新**，以確保 AI 能真正具備脈絡感知，並準確理解使用者的意圖與情境目標。  

***

## 🏷️ 核心概念  

脈絡工程的設計範疇涵蓋**脈絡收集**、**脈絡組織**與**脈絡優化**三大面向，並可結合多代理（Agents）與多模態資料。  

- 🗂️ **脈絡來源**：包括使用者輸入、歷史對話、檢索結果（RAG）、外部 API 資料、多模態感知輸入（圖像、音訊、影片）、時間與地點資訊、裝置狀態等。  
- 🏗️ **脈絡結構化**：將脈絡分為任務描述、背景知識、限制條件、範例與輔助資訊等模組，方便模型解析與利用。  
- ⏳ **脈絡長度管理**：在 Token 限制下，透過摘要、壓縮與關鍵資訊提取，保留最有價值的內容。  
- 🔄 **動態脈絡更新**：根據任務進展與模型回應，動態調整脈絡內容與優先順序。 
- 🌐 **跨模態脈絡融合**：將文字、圖像、音訊等不同模態的資訊轉換為模型可理解的統一表示，提升多模態推理能力。  
- 🧩 **脈絡與提示協同**：將脈絡工程與提示工程結合，確保提示能正確引導模型利用脈絡資訊。  
- 🔌 **API 與模組協定整合**：透過 API 與 MCP 等標準化協定，讓不同系統模組安全共享脈絡，避免資訊孤島。  
- 🛡️ **脈絡安全與對齊**：過濾敏感或不可靠的脈絡來源，確保生成內容符合安全與倫理規範。  

**小結**：脈絡工程是將資訊「組織成智慧」的過程，讓模型在生成時不僅有資料可用，還能在正確的語境下使用它們。  

## 🛅 闡明範例：領先的代理式 AI 程式設計助理  

代理式 AI 程式設計助理（Agentic AI Coding Assistants）代表了 AI 在軟體開發領域的重大演進。它們超越了簡單的程式碼自動補全或建議，能夠理解高階指令、規劃多步驟任務，並自主執行從程式碼生成到錯誤修復的整個工作流程。這背後的關鍵，正是**脈絡工程**的精準應用。  

#### 1. Agentic CLI

如 Gemini CLI 或 Claude CLI，這類是以終端機上的智慧程式設計助理為主。

- **挑戰**：你正在終端機中，遇到一個 Git 衝突，需要合併多個複雜的程式碼分支。  
- **脈絡工程的應用**：  
    - **檔案系統脈絡**：當你輸入指令時，Agentic CLI 會**自動將當前工作目錄的狀態**、**相關程式碼檔案的內容**和**Git 歷史**作為脈絡傳遞給底層的 LLM。  
    - **命令歷史與執行脈絡**：它會**分析你最近執行的命令**，如 `git status` 或 `git diff`，並將這些命令的輸出結果作為脈絡的一部分。  
    - **工具調用脈絡**：當你發出高階指令「幫我解決這個合併衝突」時，它會**自動調用 Git 工具**，並將工具的執行結果回傳給 LLM 進行分析和判斷。  
- **結果**：Agentic CLI 能夠給出精確的指令來解決衝突，甚至能**自主執行這些指令**，讓你在複雜的終端機任務中，只需專注於高階決策，而無需處理繁瑣的細節。  

#### 2. Cursor

如 Cursor ，這類是以全棧開發者的智慧工作區助理為主。

- **挑戰**：你需要重構一個名為 `utils.js` 的大型工具函式，並將其功能拆分到不同的檔案中。  
- **脈絡工程的應用**：  
    - **全專案脈絡**：Cursor 不僅能看到你當前的檔案，它能**理解整個專案的上下文**，並自動找到所有**引用了這個檔案的程式碼**，將它們的內容納入脈絡。  
    - **多檔案協同**：它能自主地在不同檔案中同步進行修改，例如在 `utils.js` 中刪除舊函式，並在 `auth.js` 和 `data.js` 中建立新函式，同時更新所有相關引用路徑。  
- **結果**：透過脈絡工程，Cursor 能夠執行複雜且涉及多個檔案的重構任務，確保程式碼一致性與正確性，大幅減少手動操作的繁瑣。  

**總結**：這些代理式 AI 不再是被動的工具，而是能夠**主動感知、規劃與執行的協作者**。它們持續將**專案結構、任務需求、程式碼邏輯以及執行結果**等動態脈絡整合到決策過程中，從根本上改變了軟體開發的工作模式。  

***

## 👍💖 最佳實務  

為了讓脈絡工程發揮最大效能，以下是常見的最佳實務：  

- 📋 **明確定義脈絡目標**：釐清脈絡的用途與任務需求，避免加入無關資訊。  
- 🗃️ **模組化脈絡設計**：將脈絡分為可重用的模組，方便在不同任務間快速組裝。  
- 🧪 **測試脈絡配置**：透過 A/B 測試比較不同脈絡組合對輸出的影響。  
- 🔄 **迭代優化**：根據模型表現與使用者反饋，不斷調整脈絡內容與結構。  
- 🛡️ **驗證脈絡來源**：確保外部資料的真實性與可靠性，防止檢索污染。  脈絡品質與更新策略對 [智慧體可靠性與評估](10-02-agent_reliability_evaluation.zh-hant) 有直接影響。
- ⏱️ **平衡脈絡豐富度與效率**：在提供足夠資訊的同時，避免超過模型脈絡長度限制。  
- 🤝 **升級 RAG 與 Agents 結合**：在多步推理與任務規劃中，動態調用檢索與工具，更新脈絡內容。  

**小結**：最佳實務的核心是讓脈絡既「足夠」又「精準」，並能隨任務動態調整。在產品層面，脈絡策略的規劃與落實是 [AI 產品經理](10-06-AI_PM.zh-hant) 的重要職責之一。

## 🪬💞 創新思路  

脈絡工程還有以下創新思路 ：

* 🚀**前沿架構創新**：脈絡工程為前沿的 AI 系統架構提供了創新沃土。例如，利用**專家混合模型**（Mixture of Experts, MoE）可依脈絡將任務分配給不同專家模型，大幅提升複雜情境的處理效率。多智能體系統則可結合**語言賽局**觀點，將脈絡工程視為策略性設計核心，構建**多代理人語言賽局**（Multi-agent Language Games）。這些新興系統設計顯示，脈絡工程不僅是一項技術，更是引領未來 AI **系統創新**的跨界關鍵領域。  
* 👨‍🚀**AI 協作者與團隊競合轉型**：脈絡工程是推動 AI 從單純的「工具」進化為主動的「協作者」的關鍵技術。它賦予 AI 理解情境、預測需求與主動協助的能力，使其不再只是被動的問答機器，而能在複雜任務中發揮協作價值，甚至不只一個角色，而是具備多種不同專業知識形成**競爭及合作**的賽局。

***

## 🤞❣️ 注意事項  

脈絡工程在設計與部署時需注意以下挑戰與風險：  

- 🔒 **隱私與安全**：避免將敏感資訊直接放入脈絡中，必要時進行脫敏處理。  
- 🚫 **脈絡污染**：防範惡意或錯誤資訊進入脈絡，影響生成結果。  
- 📉 **脈絡過載**：過多或冗餘資訊可能干擾模型判斷，降低輸出品質。  
- 🛡️ **防禦提示注入**：在多輪對話中防範惡意輸入修改脈絡內容。  
- 🔍 **結果驗證**：對生成內容進行事後檢查，確保其與脈絡一致且正確。  

透過精煉的情境框架，它幫助 AI 在動態環境中辨識並專注於相關資訊，從而提升推理與決策效率，應對 **[框架問題](01-04-Frame_Problem.zh-hant)**；藉由納入外部系統知識與工具，讓系統連結至世界的行動方案及後果檢驗，有助於緩解 **[符碼紮根問題](01-03-Symbol_Grounding_Problem.zh-hant)**。同時，它也為應對 [對齊與控制問題](01-06-AI_Alignment_Control_Problem.zh-hant) 提供了具脈絡實踐及檢驗的路徑。  

***

## 🌉 回顧及資源  

- ✨ **核心知識**：脈絡工程是連接提示工程與檢索增強生成（RAG）的關鍵橋樑，負責將多來源、多模態資訊（任務描述、背景知識、互動歷史、外部檢索結果、感測器資料、API 輸出等）整合成高效可用的上下文，並以結構化方式輸入 LLM。這一過程直接影響系統的推理深度、生成品質、可解釋性與對齊性，也促進更複雜的「多輪對話」、「跨模態任務協作」可能性，引發更多AI控制、AI安全等問題。
- ✅ **實務應用檢核表**：
	- 驗證脈絡來源的真實性與可信度
	- 確保脈絡結構化與模組化程度足夠，便於重用與維護
	- 制定脈絡長度管理策略（摘要、壓縮、關鍵資訊提取）
	- 實施動態更新機制，隨任務進展調整脈絡內容
	- 部署安全防護與對齊策略，防範脈絡污染與提示注入攻擊
- 🏄 **延伸閱讀與工具資源**：可參考最新的 OpenAI、Anthropic 等關於脈絡管理的**最佳實務**文件，RAG 框架（如 LangChain、Haystack）的**脈絡組裝模組**，以及多代理系統的**脈絡協作**案例。  
