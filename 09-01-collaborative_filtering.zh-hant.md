---
title: "🤝🚿 協同過濾" 
tags:
- 數據導向
- 機率性關聯
- 機器學習模型
- 向量空間
- 推薦系統
- 特徵工程
- 數據科學
- 線性代數
- 矩陣分解
- 特徵學習
---
`協同過濾`（Collaborative Filtering, CF），是種 **[機器學習模型](04-05-machine_learning_models.zh-hant)** ，主要應用於**推薦系統**的「人以群分，物以類聚」。它主要基於**用戶行為的相似性**來發掘潛在的用戶群體或項目類別，進行的**推薦**、**配對**、**分類**、等決策或預測。由於協同過濾高度依賴大量的用戶行為數據進行**分析**，因此具有顯著的 **[數據導向](05-02-oriented_data.zh-hant)** 特徵，算是一項 **[特徵工程](04-04-feature_engineering.zh-hant)** 。

從人工智能應用的角度來看，`協同過濾`可以被視為一種**數據驅動**的**心智框架**，專注於發現**關聯性**與**相似度**。此框架能基於大量**互動數據**（如評分、點擊、購買記錄等），來實現**推薦**、**配對**、**分類**等決策或預測任務。

## 🚀 應用場景

協同過濾在多種廣泛應用場景，表現出色：

- 🛍️ **電子商務**：推薦用戶可能感興趣的商品，例如亞馬遜、淘寶的「購買此商品的顧客也買了...」。
- 🌐 **社群網路**：推薦可能感興趣的朋友、內容或群組。
- 💞 **匹配應用**：如婚戀交友、職業匹配等。
- 📺 **影音串流平台**：推薦電影、電視劇，例如 Netflix 的推薦引擎。
- 🎶 **音樂服務**：推薦用戶可能喜歡的歌曲或專輯，例如 Spotify 的「每日推薦」。
- 📰 **新聞與內容平台**：根據閱讀歷史推薦個性化的新聞文章或部落格。

這些應用領域的共同特點是數據量龐大，且需要高效、個性化精準推薦。協同過濾能夠**有效挖掘潛在模式**。

## 🔬 細說

在**數據庫**方面，此評分或相似度**矩陣**的表徵，通常是使用者過去的行為和偏好（如購買的產品或服務），再進行機器學習的**特徵工程**，以對使用者的行為或偏好進行分類或推估，或對項目（如產品或服務）進行分類或分析。

在底層**數學**方面，**線性代數**用來處理相關矩陣（通常是 **[稀疏矩陣](09-04-sparse_modeling.zh-hant)**）和計算**相似度**。**機率模型**且來捕捉使用者與項目、使用者與使用者之間、等等的**關聯性**。[向量空間](04-07-vector_space.zh-hant)則在協同過濾的運算實作時，實存的關聯性會被映射到向量空間中，進行如相似度的運算。
### 🤝▦ 結構與定義

為了表徵**使用者**和**項目**之間的關係，協同過濾常採用以下兩種主要的矩陣形式：

1. **使用者-項目評分矩陣**（User-Item Rating Matrix）：記錄用戶對各個項目的評分或互動情況。
    
2. **使用者-使用者相似度矩陣**（User-User Similarity Matrix）：計算用戶之間的相似程度。

這些矩陣的建立，通常是基於使用者的歷史行為數據（例如購買記錄、觀看紀錄、點讚等），再透過**特徵工程**對這些行為進行分析、分類或預測。

### 🤝🚿 協同過濾分類

協同過濾通常分為兩大類，但核心流程都基於數據的相似性分析：

1. **基於用戶的協同過濾**（User-Based CF）：
    
    - **尋找相似用戶**：計算目標用戶與所有其他用戶之間的相似度（例如，使用皮爾森相關係數或餘弦相似度），找出「鄰居」用戶群。
        
    - **生成推薦**：將鄰居用戶喜歡但目標用戶尚未評分或互動過的物品，推薦給目標用戶。
        
2. **基於物品的協同過濾**（Item-Based CF）：
    
    - **尋找相似物品**：計算物品與物品之間的相似度（例如，根據所有用戶對它們的評分模式）。
        
    - **生成推薦**：對於目標用戶喜歡的某個物品，找出與其最相似的其他物品，並將這些物品推薦給用戶。


### 🧮📐 線性代數支撐

協同過濾的強大之處，很大程度上源於其深厚的**線性代數**根基：

- 📊 **用戶-物品矩陣**：協同過濾演算法的起點都是一個巨大的**用戶-物品互動矩陣**，是典型的 **[稀疏矩陣](09-04-sparse_modeling.zh-hant)**：
	- 這個矩陣$R$，可分解為代表用戶的行，代表物品的列，矩陣中的值可以是評分、偏好、點擊次數等，可用$R_{ui}$表示用戶 $u$ 對項目 $i$　表徵值。
- 📐 **相似度計算**：無論是**皮爾遜相關係數**還是**餘弦相似度**，無論是基於用戶還是基於物品，相似度的計算都大量使用了**向量運算**。
- 📈 **矩陣分解**（Matrix Factorization）：這是現代協同過濾常用的技術，用於處理 **[稀疏矩陣](09-04-sparse_modeling.zh-hant)**，將原始的矩陣分解為兩個或多個較小的矩陣，分別代表用戶和物品的「潛在特徵」或「隱含因子」（latent factors），又可稱為**潛在因子矩陣**。
	- 其中，$P$ 是用戶-潛在因子矩陣，$Q$ 是項目-潛在因子矩陣。這種方法能夠挖掘出隱藏在用戶行為背後的潛在特徵，並透過這些特徵來預測未知的偏好：
$$
\begin{equation} R \approx P \times Q^T \end{equation}
$$
### 🤝🚿 演算法過程

不論是基於用戶還是基於項目，協同過濾的過程通常包含以下步驟：

1. **資料蒐集**：記錄用戶與項目的互動數據，如評分、點擊、購買記錄等，形成一個龐大的**用戶-項目互動矩陣**。
    
2. **相似度計算**：根據用戶或項目的數據，計算它們之間的相似度。
    
3. **鄰居選擇**：從相似度計算結果中，選取最相似的若干用戶或項目作為「鄰居」。
    
4. **產生推薦**：根據鄰居的偏好，預測目標用戶對未接觸項目的偏好程度，並將預測值最高的項目推薦給用戶。

## 🌟 定位與應用考量
    
理解`協同過濾`在 AI 領域中的定位，有助於應用時考量其適用情境與優化方向。

### ⚓🗺 定位

在決策方面，幫助使用者、設計者或智能體有一套數據驅動的**信息過濾框架**，以便較快做出選擇：

* 🖼️⏱️ [框架問題](01-04-Frame_Problem.zh-hant)：從海量資訊中，過濾出對特定用戶有價值的內容，符合框架問題現代觀點，具備一定的**即時篩選**與**創造適應**（依據當下大數據及個別用戶數據）的特性。
* 🔴🧐🧭 [指導型分析](06-03-analysis_prescriptive.zh-hant)：協同過濾能直接向用戶推薦具體項目，符合「直接給出行動建議」的指導型分析特性。

若以[☸ AI 導向](05----ai_orientations.zh-hant)定位，協同過濾的應用明顯落在：

- ☸🌀[數據導向](05-02-oriented_data.zh-hant)：透過分析**用戶行為數據**來建構**隱性知識**，即「什麼樣的人喜歡什麼樣的東西」，並利用這些知識進行推薦。
- ☸🤖 [智能體／代理人導向](05-03-oriented_agent.zh-hant)：協同過濾可視為一個推薦代理人，代表用戶從海量資訊中篩選出最佳選擇。

### 📐🌉 應用考量

協同過濾是個強大的工具，但也存在其局限性，常需透過結合其他技術來彌補：

- 🥶 **冷啟動問題**（Cold Start Problem）：當新用戶或新項目加入時，由於沒有足夠的互動數據，協同過濾難以提供準確的推薦。
    
- 🧊 **稀疏性問題**：在許多推薦場景中，用戶的行為數據非常稀疏（即用戶接觸的項目遠少於總項目數），這會導致相似度計算不準確。
    
- 🙈 **可解釋性問題**：尤其是在使用複雜的矩陣分解技術時，推薦的理由往往難以直觀解釋。

此外，在 AI 系統中，協同過濾可與以下方法結合：

* 🏮💪 [行為主義](02-06-behaviorism.zh-hant)的**強化學習**：
	* **互動式推薦**：根據使用者即時反饋動態調整推薦策略。
	* **探索與利用平衡**：在推薦中引入新項目探索，避免過度集中於既有偏好。
* 🏮🧬 [連結主義](02-05-connectionism.zh-hant)的**深度學習**：
	* **神經協同過濾**（Neural Collaborative Filtering，NCF）：現代推薦系統廣泛採用深度神經網路來學習複雜的、非線性的用戶—項目互動模式。這種方法能捕捉到傳統線性模型難以發現的細微偏好，例如 Google 的 YouTube 推薦系統就大量使用了深度學習模型。
	* **混合式推薦**：為了克服協同過濾在**冷啟動問題**（新用戶或新項目數據不足）上的限制，混合式推薦系統結合了內容特徵（如電影的類型、演員，或商品的描述）與協同訊號。Amazon 和 Spotify 等平台都採用了此類方法，結合了協同過濾的群體智慧與內容資訊的項目關聯性，以提供更全面、準確的推薦。
* 🌉🎁 [AI工程](10----ai_engineering.zh-hant) 及 [產品經理](10-06-AI_PM.zh-hant)實踐的一部分：
	* **API 界面**：整合[API界面](10-01-API_MCP.zh-hant)）、**評估指標**（如精確度、召回率）以及**可解釋性**（雖然協同過濾本身解釋性較弱，但可透過技術如 LIME 或 SHAP 輔助）等，以突出產品價值並對齊需求及價值觀。

協同過濾在 AI應用時，往往不是獨立運作，而是作為關鍵組件與其他技術協作，以達成更佳的性能和用戶體驗。例如，協同過濾可與**圖神經網路**（Graph Neural Networks, GNN）結合，利用使用者—項目圖結構進行高階關係建模。

***

## 🏁 小結及相關條目

`協同過濾`是一種基於**使用者行為**數據庫以及以**線性代數**為數學基礎的一種**數據驅動**的**心智框架**，專注於發現**關聯性**與**相似度**。在 AI 領域，此框架能基於大量**互動數據**（如評分、點擊、購買記錄等），來實現**推薦**、**配對**、**分類**等決策或預測任務。

在 AI 領域，它能達成「人以群分，物以類聚」，有效應對現代[框架問題](01-04-Frame_Problem.zh-hant)。具備一定的**即時篩選**與**創造適應**的特性，它能協助我們設計出能有效應對**資訊過載**的[數據導向](05-02-oriented_data.zh-hant)系統環節，以[指導型分析](06-03-analysis_prescriptive.zh-hant)的價值，在[任務導向](05-04-oriented_task.zh-hant) 應用中實現更佳的**協調**與**最佳化**，實現**推薦**、**配對**、**分類**等決策或預測任務。因此，在[智能體／代理人導向](05-03-oriented_agent.zh-hant)應用方面，協同過濾亦扮演必要的篩選及適應的要角。此外，協同過濾也應考量**強化學習**（如即時反饋動態調整推薦）及**深度學習**（如神經協同過濾捕捉細緻偏好）等等成功案例，都有助設計出更具**個性化**與**人性化**的 [智能體／代理人導向](05-03-oriented_agent.zh-hant) 系統，同時在[任務導向](05-04-oriented_task.zh-hant) 應用中達成更佳的**使用者體驗**與商業價值。



