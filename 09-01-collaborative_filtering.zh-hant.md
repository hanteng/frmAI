---
tags:
- 數據導向
- 機率性關聯
- 機器學習模型
- 向量空間
- 推薦系統
- 特徵工程
- 數據科學
- 線性代數
- 矩陣分解
- 特徵學習
---
# 🤝🚿 協同過濾 {#sec-collaborative-filtering}

`協同過濾`（Collaborative Filtering, CF），是種 **[機器學習模型](04-05-machine_learning_models.zh-hant)** ，主要應用於**推薦系統**，基於「人以群分，物以類聚」的原則。它依據**用戶行為的相似性**來發掘潛在的用戶群體或項目類別，進行**推薦**、**配對**、**分類**、等決策或預測。由於協同過濾高度依賴大量用戶行為數據，因此是**數據驅動**的 **[特徵工程](04-04-feature_engineering.zh-hant)**。

從人工智能應用的角度來看，`協同過濾`可以被視為一種 **[數據導向](05-02-oriented_data.zh-hant)** 的**心智框架**，專注於發現**關聯性**與**相似度**。此框架能基於大量**互動數據**（如評分、點擊、購買記錄等），來實現**推薦**、**配對**、**分類**等任務。`協同過濾` 可被視為一種**數據驅動的推薦框架**，其核心思想是：

> 根據**用戶行為的相似性**，找出「與你相似的人喜歡什麼」，再將這些項目**推薦**給你。

## 🚀 應用場景

協同過濾在多種場景中表現出色：

- 🛍️ **電子商務**：推薦用戶可能感興趣的商品，例如亞馬遜、淘寶的「購買此商品的顧客也買了...」。
- 🌐 **社群網路**：推薦可能感興趣的朋友、內容或群組。
- 💞 **匹配應用**：如婚戀交友、職業匹配等。
- 📺 **影音串流平台**：推薦電影、電視劇，例如 Netflix 的推薦引擎。
- 🎶 **音樂服務**：推薦用戶可能喜歡的歌曲或專輯，例如 Spotify 的「每日推薦」。
- 📰 **新聞與內容平台**：根據閱讀歷史推薦個性化的新聞文章或部落格。

這些應用領域的共同特點是數據量龐大，且需要高效、個性化的精準推薦。協同過濾能夠**有效挖掘潛在模式**。

## 🔬 細說

在**數據庫**方面，評分或相似度**矩陣**的表徵通常來自使用者過去的行為和偏好（如購買的產品或服務），再透過機器學習的**特徵工程**，對使用者的行為或偏好進行分類或預測，或對項目（如產品或服務）進行分析。

在底層**數學**方面，**線性代數**用來處理相關矩陣（通常是 **稀疏矩陣**）並計算**相似度**。**機率模型**則用來捕捉使用者與項目、使用者與使用者之間的**關聯性**。向量空間則在協同過濾的運算實作中，將關聯性映射到向量空間中以進行相似度運算。

### 🤝▦ 結構與定義

為了表徵**使用者**和**項目**之間的關係，協同過濾常採用以下兩種主要的矩陣形式：

1. 👤📦**使用者-項目評分矩陣**（User-Item Rating Matrix）：記錄用戶對各個項目的評分或互動情況。
    
2. 👤👤**使用者-使用者相似度矩陣**（User-User Similarity Matrix）：計算用戶之間的相似程度。

這些矩陣的建立通常基於使用者的歷史行為數據（例如購買記錄、觀看紀錄、點讚等），再透過**特徵工程**進行分析、分類或預測。

### 🤝🚿 協同過濾分類

協同過濾通常分為兩大類，核心流程皆基於數據的相似性分析：

1. 👤 **基於用戶的協同過濾**（User-Based CF）：
    
    - 🔍 **尋找相似用戶**：計算目標用戶與其他用戶之間的相似度（例如使用皮爾森相關係數或餘弦相似度），找出「鄰居」用戶群。
        
    - 👍 **生成推薦**：將鄰居用戶喜歡但目標用戶尚未互動的物品推薦給目標用戶。
        
2. 📦**基於物品的協同過濾**（Item-Based CF）：
    
    - 🔍**尋找相似物品**：計算物品之間的相似度（例如根據所有用戶對它們的評分模式）。
        
    - 👍 **生成推薦**：對於目標用戶喜歡的物品，找出與其最相似的其他物品並推薦。

### 🧮📐 線性代數支撐

協同過濾的強大之處，很大程度上源於其深厚的**線性代數**根基：

- ▦ **用戶-物品矩陣**：協同過濾演算法的起點都是一個巨大的**用戶-物品互動矩陣**，是典型的 **[稀疏矩陣](09-04-sparse_modeling.zh-hant)**：
	- 這個矩陣$R$，矩陣中的行代表用戶，列代表物品，值可以是評分、偏好、點擊次數等，可用$R_{ui}$表示用戶 $u$ 對項目 $i$ 表徵值。
- 📐 **相似度計算**：無論是**皮爾遜相關係數**還是**餘弦相似度**，皆大量使用**向量運算**。。
- ⛓‍💥 **矩陣分解**（Matrix Factorization）：現代協同過濾常用技術，用於處理 **稀疏矩陣**，將原始矩陣分解為兩個或多個較小矩陣，分別代表用戶與物品的「潛在特徵」或「隱含因子」（latent factors），又稱**潛在因子矩陣**。
	- 其中，$P$ 是用戶-潛在因子矩陣，$Q$ 是項目-潛在因子矩陣。這種方法能夠挖掘出隱藏在用戶行為背後的潛在特徵，並透過這些特徵來預測未知的偏好：

$$
\begin{equation} R \approx P \times Q^T \end{equation}
$$

### 🤝🚿 演算法過程

不論是基於用戶或項目，協同過濾的流程通常包含以下步驟：

1. 📥 **資料蒐集**：記錄用戶與項目的互動數據，如評分、點擊、購買記錄等，形成龐大的**用戶-項目互動矩陣**。
    
2. 📐 **相似度計算**：根據用戶或項目的數據，計算其間的相似度。
    
3. 🧑‍🤝‍🧑 **鄰居選擇**：從相似度結果中選取最相似的若干用戶或項目作為「鄰居」。
    
4. 👍 **產生推薦**：根據鄰居的偏好，預測目標用戶對未接觸項目的偏好程度，並推薦預測值最高的項目。

## 🌟 定位與應用考量
    
理解`協同過濾`在 AI 領域中的定位，有助於應用時考量其適用情境與優化方向。

### ⚓🗺 定位

在決策方面，協同過濾提供一套數據驅動的**信息過濾框架**，幫助使用者、設計者或智能體快速做出選擇：

* 🖼️⏱️ [框架問題](01-04-Frame_Problem.zh-hant)：從海量資訊中過濾出對特定用戶有價值的內容，具備**即時篩選**與**創造適應**（依據大數據與個別用戶數據）的特性。
* 🔴🧐🧭 [指導型分析](06-03-analysis_prescriptive.zh-hant)：能直接向用戶推薦具體項目，符合「直接給出行動建議」的特性。

若以[☸ AI 導向](05----ai_orientations.zh-hant)定位，協同過濾的應用明顯落在：

- ☸🌀[數據導向](05-02-oriented_data.zh-hant)：分析**用戶行為數據**以建構**隱性知識**，即「什麼樣的人喜歡什麼樣的東西」，並利用此知識進行推薦。
- ☸🤖 [智能體／代理人導向](05-03-oriented_agent.zh-hant)：協同過濾可視為推薦代理人，代表用戶從海量資訊中篩選最佳選擇。

### 📐🌉 應用考量

協同過濾是個強大的工具，但也存在其局限性，常需透過結合其他技術來彌補：

- 🥶 **冷啟動問題**（Cold Start Problem）：新用戶或新項目加入時，因缺乏互動數據，難以提供準確推薦。
    
- 🧊 **稀疏性問題**：用戶行為數據稀疏，導致相似度計算不準確。
    
- 🙈 **可解釋性問題**：使用複雜矩陣分解技術時，推薦理由難以直觀解釋。

此外，在 AI 系統中，協同過濾可與以下方法結合：

* 🏮💪 [行為主義](02-06-behaviorism.zh-hant)的**強化學習**：
	* 🔄 **互動式推薦**：根據使用者即時反饋動態調整推薦策略。
	* ⚖️ **探索與利用平衡**：引入新項目探索，避免過度集中於既有偏好。
* 🏮🧬 [連結主義](02-05-connectionism.zh-hant)的**深度學習**：
	* 🧠 **神經協同過濾**（Neural Collaborative Filtering，NCF）：使用深度神經網路學習複雜、非線性的用戶—項目互動模式，以捕捉傳統線性模型難以發現的細微偏好，例如 YouTube 推薦系統。
	* 🧪 **混合式推薦**：結合內容特徵（如電影類型、演員、商品描述）與協同訊號，克服冷啟動問題。Amazon 和 Spotify 等平台採用此方法，融合群體智慧與內容資訊以提供更準確推薦。
* 🌉🎁 [AI工程](10----ai_engineering.zh-hant) 及 [產品經理](#sec-ai-pm) 實踐的一部分：
	* 🔌 整合[API界面](@sec-api-mcp)、**評估指標**（如精確度、召回率）以及**可解釋性**（可輔以 LIME 或 SHAP 技術），以突顯產品價值並對齊需求與價值觀。

協同過濾在 AI 應用中常與其他技術協作，以提升性能與使用者體驗。例如，協同過濾可結合**圖神經網路**（Graph Neural Networks, GNN），利用使用者—項目圖結構進行高階關係建模。

***

## 🏁 小結及相關條目

`協同過濾`是一種基於**使用者行為**數據庫與**線性代數**數學基礎的**數據驅動**心智框架，專注於發現 **[關聯性](04-01-probabilistic_association.zh-hant)** 與 **相似度** 以達成「人以群分，物以類聚」效能。在[AI 產品](#sec-ai-pm)與[AI 工程](10----ai_engineering.zh-hant)領域，此框架能基於大量**互動數據**（如評分、點擊、購買記錄等），實現**推薦**、**配對**、**分類**等任務。

它能有效應對現代 [框架問題](01-04-Frame_Problem.zh-hant)，具備**即時篩選**與**創造適應**特性，協助設計能應對**資訊過載**的[數據導向](05-02-oriented_data.zh-hant)系統，並展示其 [指導型分析](06-03-analysis_prescriptive.zh-hant) 價值，在 **[任務導向](05-01-oriented_task.zh-hant)** 、 **[智能體／代理人導向](05-03-oriented_agent.zh-hant)** 應用中實現更佳的**篩選**、**協調**與**最佳化**。

此外，協同過濾亦可結合**強化學習**（如，即時反饋調整推薦）與**深度學習**（如，神經協同過濾捕捉細緻偏好）等技術，設計出更具**個性化**與**人性化**的推薦或匹配系統，提升使用者體驗與商業價值。